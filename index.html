<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Content Card Image Maker</title>

  <!-- Loads your Euclid + UI styles -->
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="card-copy">
        <h1>Need an image for <br>your content card?</h1>
        <p>Upload your image, move it around and zoom to find the perfect crop. Then hit download, easy..</p>
      </div>

      <!-- Hidden file input (used by app.js) -->
      <input id="file" type="file" accept="image/*" class="visually-hidden" />

      <!-- Preview / canvas -->
      <div class="preview">
        <canvas id="out" width="470" height="200" aria-label="preview"></canvas>

        <!-- Overlay upload hint button -->
        <button id="emptyHint" type="button" class="empty-hint" aria-label="Upload an image">
          <img src="./images/upload.png" alt="" />
          <span>Upload your image</span>
        </button>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <div class="slider-card">
        <div class="slider-title">Zoom (<span id="zoomPct">100%</span>)</div>
        <!-- Default range symmetric (0.5–1.5) so thumb starts in middle -->
        <input id="zoom" type="range" min="0.5" max="1.5" step="0.01" value="1" />
      </div>

      <div class="buttons">
        <button id="download" class="btn btn-outline">
          <img src="./images/download.png" alt="" />
          <span>Download your file</span>
        </button>
      </div>
    </div>

    <!-- Hidden reset (kept for app.js logic) -->
    <button id="reset" class="visually-hidden">Reset view</button>
  </div>

  <script type="module" src="./app.js"></script>
  <script>
    // Bridge overlay button → hidden file input
    const fileInput = document.getElementById('file');
    const emptyHint = document.getElementById('emptyHint');
    if (emptyHint) {
      emptyHint.addEventListener('click', () => fileInput.click());
    }

    // Keep zoom % label in sync with slider value
    const zoomSlider = document.getElementById('zoom');
    const zoomPct = document.getElementById('zoomPct');
    function updateInitialZoom() {
      const min = parseFloat(zoomSlider.min);
      const max = parseFloat(zoomSlider.max);
      const mid = (min + max) / 2;
      zoomSlider.value = String(mid);
      zoomPct.textContent = '100%';
      zoomSlider.style.setProperty('--fill', '50%');
    }
    updateInitialZoom();
  </script>
  <noscript>Please enable JavaScript to use the image maker.</noscript>
</body>
</html>
